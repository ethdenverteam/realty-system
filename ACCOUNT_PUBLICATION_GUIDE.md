# üìò –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –∞–∫–∫–∞—É–Ω—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø—É–±–ª–∏–∫–∞—Ü–∏—é –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ Telegram –∞–∫–∫–∞—É–Ω—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–Ω–µ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –±–æ—Ç–∞). –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏—è –æ—Ç —Å–≤–æ–µ–≥–æ –∏–º–µ–Ω–∏ –≤ —Å–≤–æ–∏—Ö —á–∞—Ç–∞—Ö.

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

#### 1. **TelegramAccount** ‚Äî –∞–∫–∫–∞—É–Ω—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `account_id` ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `owner_id` ‚Äî –≤–ª–∞–¥–µ–ª–µ—Ü –∞–∫–∫–∞—É–Ω—Ç–∞ (User)
- `phone` ‚Äî –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π)
- `session_file` ‚Äî –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É —Å–µ—Å—Å–∏–∏ Telethon
- `mode` ‚Äî —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã (safe/normal/aggressive/smart/fix)
- `daily_limit` ‚Äî –¥–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç –ø—É–±–ª–∏–∫–∞—Ü–∏–π
- `is_active` ‚Äî –∞–∫—Ç–∏–≤–µ–Ω –ª–∏ –∞–∫–∫–∞—É–Ω—Ç
- `last_used` ‚Äî –ø–æ—Å–ª–µ–¥–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
- `last_error` ‚Äî –ø–æ—Å–ª–µ–¥–Ω—è—è –æ—à–∏–±–∫–∞

#### 2. **Chat** ‚Äî —á–∞—Ç—ã –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
- `chat_id` ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `telegram_chat_id` ‚Äî ID —á–∞—Ç–∞ –≤ Telegram
- `title` ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ —á–∞—Ç–∞
- `owner_type` ‚Äî —Ç–∏–ø –≤–ª–∞–¥–µ–ª—å—Ü–∞: `'bot'` –∏–ª–∏ `'user'`
- `owner_account_id` ‚Äî ID –∞–∫–∫–∞—É–Ω—Ç–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞ (legacy, –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
- `is_active` ‚Äî –∞–∫—Ç–∏–≤–µ–Ω –ª–∏ —á–∞—Ç

#### 3. **TelegramAccountChat** ‚Äî —Å–≤—è–∑—å many-to-many –∞–∫–∫–∞—É–Ω—Ç ‚Üî —á–∞—Ç
- `account_id` ‚Äî ID –∞–∫–∫–∞—É–Ω—Ç–∞
- `chat_id` ‚Äî ID —á–∞—Ç–∞
- **–í–∞–∂–Ω–æ**: –û–¥–∏–Ω –∞–∫–∫–∞—É–Ω—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –º–Ω–æ–∂–µ—Å—Ç–≤—É —á–∞—Ç–æ–≤, –æ–¥–∏–Ω —á–∞—Ç ‚Äî –∫ –º–Ω–æ–∂–µ—Å—Ç–≤—É –∞–∫–∫–∞—É–Ω—Ç–æ–≤

#### 4. **AutopublishConfig** ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞–≤—Ç–æ–ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –¥–ª—è –æ–±—ä–µ–∫—Ç–∞
- `object_id` ‚Äî ID –æ–±—ä–µ–∫—Ç–∞
- `enabled` ‚Äî –≤–∫–ª—é—á–µ–Ω–∞ –ª–∏ –∞–≤—Ç–æ–ø—É–±–ª–∏–∫–∞—Ü–∏—è
- `bot_enabled` ‚Äî –≤–∫–ª—é—á–µ–Ω–∞ –ª–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ –±–æ—Ç–∞ (–≤—Å–µ–≥–¥–∞ True)
- `accounts_enabled` ‚Äî –≤–∫–ª—é—á–µ–Ω–∞ –ª–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ –∞–∫–∫–∞—É–Ω—Ç—ã
- `accounts_config_json` ‚Äî JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
  ```json
  {
    "publication_format": "default",
    "accounts": [
      {
        "account_id": 1,
        "chat_ids": [10, 11, 12]
      },
      {
        "account_id": 2,
        "chat_ids": [20, 21]
      }
    ]
  }
  ```

#### 5. **AccountPublicationQueue** ‚Äî –æ—á–µ—Ä–µ–¥—å –ø—É–±–ª–∏–∫–∞—Ü–∏–π —á–µ—Ä–µ–∑ –∞–∫–∫–∞—É–Ω—Ç—ã
- `queue_id` ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `object_id` ‚Äî ID –æ–±—ä–µ–∫—Ç–∞
- `chat_id` ‚Äî ID —á–∞—Ç–∞
- `account_id` ‚Äî ID –∞–∫–∫–∞—É–Ω—Ç–∞
- `user_id` ‚Äî ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `status` ‚Äî —Å—Ç–∞—Ç—É—Å: `pending`, `processing`, `completed`, `failed`
- `scheduled_time` ‚Äî –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ (UTC)
- `attempts` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫
- `error_message` ‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ

---

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

### 1. –ü—Ä–∏–≤—è–∑–∫–∞ —á–∞—Ç–æ–≤ –∫ –∞–∫–∫–∞—É–Ω—Ç—É

**‚ö†Ô∏è –í–ê–ñ–ù–û**: –ß–∞—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å **–ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –∞–∫–∫–∞—É–Ω—Ç—É** —á–µ—Ä–µ–∑ `TelegramAccountChat` **–î–û** —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∞–≤—Ç–æ–ø—É–±–ª–∏–∫–∞—Ü–∏–∏. –ï—Å–ª–∏ —á–∞—Ç –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –∞–∫–∫–∞—É–Ω—Ç—É, –æ–Ω –Ω–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –≤—ã–±–æ—Ä–∞ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∞–≤—Ç–æ–ø—É–±–ª–∏–∫–∞—Ü–∏–∏.

#### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ —Å—Ç—Ä–∞–Ω–∏—Ü—É "–ß–∞—Ç—ã" (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **"–ß–∞—Ç—ã"** (`/user/dashboard/chats`)
2. –í—ã–±–µ—Ä–∏—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –∏–∑ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"–û–±–Ω–æ–≤–∏—Ç—å —á–∞—Ç—ã"** (–∏–ª–∏ –æ–Ω–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –∞–∫–∫–∞—É–Ω—Ç–∞)
4. –°–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∑–∏—Ç —á–∞—Ç—ã –∏–∑ Telegram —á–µ—Ä–µ–∑ endpoint `GET /system/accounts/<account_id>/chats`
5. –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —á–∞—Ç–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å–≤—è–∑—å —á–µ—Ä–µ–∑ `TelegramAccountChat`

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —á–∞—Ç–æ–≤**:
- –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ –∏–∑ Telegram —á–µ—Ä–µ–∑ Telethon
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ —á–∞—Ç–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü–µ `chats`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å–≤—è–∑—å –≤ —Ç–∞–±–ª–∏—Ü–µ `telegram_account_chats` –º–µ–∂–¥—É –∞–∫–∫–∞—É–Ω—Ç–æ–º –∏ —á–∞—Ç–æ–º

#### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ —Å—Ç—Ä–∞–Ω–∏—Ü—É "–ê–≤—Ç–æ–ø—É–±–ª–∏–∫–∞—Ü–∏—è"

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **"–ê–≤—Ç–æ–ø—É–±–ª–∏–∫–∞—Ü–∏—è"** (`/user/dashboard/autopublish`)
2. –í—ã–±–µ—Ä–∏—Ç–µ –æ–±—ä–µ–∫—Ç
3. –í –±–ª–æ–∫–µ –∞–∫–∫–∞—É–Ω—Ç–∞ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"–ó–∞–≥—Ä—É–∑–∏—Ç—å —á–∞—Ç—ã"**
4. –°–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∑–∏—Ç —á–∞—Ç—ã –¥–ª—è —ç—Ç–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –∏ —Å–æ–∑–¥–∞—Å—Ç –ø—Ä–∏–≤—è–∑–∫–∏

#### –°–ø–æ—Å–æ–± 3: –ß–µ—Ä–µ–∑ –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ –≥—Ä—É–ø–ø—ã —á–∞—Ç–æ–≤

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **"–ü–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ —á–∞—Ç—ã"** (`/user/dashboard/chat-subscriptions`)
2. –°–æ–∑–¥–∞–π—Ç–µ –≥—Ä—É–ø–ø—É —á–∞—Ç–æ–≤ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–¥–∞—á—É –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ —á–∞—Ç—ã
4. –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å–≤—è–∑—å —á–µ—Ä–µ–∑ `TelegramAccountChat`

**Endpoint –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —á–∞—Ç–æ–≤**: `GET /system/accounts/<account_id>/chats`

**–ö–æ–¥ —Å–æ–∑–¥–∞–Ω–∏—è —Å–≤—è–∑–∏** (—Å—Ç—Ä–æ–∫–∏ 399-409 –≤ `app/routes/accounts.py`):
```python
# –°–æ–∑–¥–∞–µ–º/–æ–±–Ω–æ–≤–ª—è–µ–º —Å–≤—è–∑—å –∞–∫–∫–∞—É–Ω—Ç–∞ —Å —á–∞—Ç–æ–º –≤ —Ç–∞–±–ª–∏—Ü–µ TelegramAccountChat
if chat_obj and chat_obj.chat_id:
    link = TelegramAccountChat.query.filter_by(
        account_id=account_id,
        chat_id=chat_obj.chat_id
    ).first()
    if not link:
        db.session.add(TelegramAccountChat(
            account_id=account_id,
            chat_id=chat_obj.chat_id
        ))
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–ø—É–±–ª–∏–∫–∞—Ü–∏–∏

**Endpoint**: `POST /system/user/dashboard/autopublish`

**–®–∞–≥–∏**:
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —á–∞—Ç—ã –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –∞–∫–∫–∞—É–Ω—Ç—É (—Å–º. —Ä–∞–∑–¥–µ–ª –≤—ã—à–µ)
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –æ–±—ä–µ–∫—Ç
3. –í—ã–±–∏—Ä–∞–µ—Ç –∞–∫–∫–∞—É–Ω—Ç—ã –∏ —á–∞—Ç—ã –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ (–¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ —á–∞—Ç—ã)
4. –°–∏—Å—Ç–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ `AutopublishConfig.accounts_config_json`

**–í–∞–∂–Ω–æ**: 
- –ï—Å–ª–∏ —á–∞—Ç –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –∞–∫–∫–∞—É–Ω—Ç—É, –æ–Ω –Ω–µ –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ —Å–ø–∏—Å–∫–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —á–∞—Ç–æ–≤
- –ü—Ä–∏–≤—è–∑–∫–∞ —á–∞—Ç–æ–≤ –∫ –∞–∫–∫–∞—É–Ω—Ç–∞–º –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –∑–∞–≥—Ä—É–∑–∫—É —á–∞—Ç–æ–≤ (—Å–º. —Ä–∞–∑–¥–µ–ª –≤—ã—à–µ)

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

#### 2.1. –ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (`create_or_update_autopublish_config`)

–ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –∞–≤—Ç–æ–ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –¥–ª—è –æ–±—ä–µ–∫—Ç–∞:
1. –°–æ–∑–¥–∞—é—Ç—Å—è –∑–∞–¥–∞—á–∏ –≤ `AccountPublicationQueue` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –∏ —á–∞—Ç–∞ –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
2. –í—Ä–µ–º—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è:
   - –ï—Å–ª–∏ —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ 8:00-22:00 –ú–°–ö ‚Üí –ø—É–±–ª–∏–∫–∞—Ü–∏—è —Å—Ä–∞–∑—É
   - –ò–Ω–∞—á–µ ‚Üí —Å–ª–µ–¥—É—é—â–µ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è (8:00 –ú–°–ö —Å–ª–µ–¥—É—é—â–µ–≥–æ –¥–Ω—è)

**–ö–æ–¥** (—Å—Ç—Ä–æ–∫–∏ 470-513 –≤ `app/routes/user_routes.py`):
```python
accounts_cfg = cfg.accounts_config_json or {}
accounts_list = accounts_cfg.get('accounts') if isinstance(accounts_cfg, dict) else []
if isinstance(accounts_list, list):
    for acc_entry in accounts_list:
        account_id = acc_entry.get('account_id')
        chat_ids = acc_entry.get('chat_ids', [])
        if account_id and chat_ids:
            account = TelegramAccount.query.get(account_id)
            if account and account.owner_id == current_user.user_id and account.is_active:
                for chat_id in chat_ids:
                    chat = WebChat.query.get(chat_id)
                    # –í–ê–ñ–ù–û: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–≤—è–∑–∫–∏ —á–∞—Ç–∞ –∫ –∞–∫–∫–∞—É–Ω—Ç—É
                    if chat and chat.owner_type == 'user' and chat.owner_account_id == account_id:
                        # –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –≤ AccountPublicationQueue
                        queue = AccountPublicationQueue(...)
                        db.session.add(queue)
```

**–ü—Ä–æ–±–ª–µ–º–∞**: –ö–æ–¥ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–ª—å–∫–æ legacy –ø–æ–ª–µ `chat.owner_account_id`, –Ω–æ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–≤—è–∑—å —á–µ—Ä–µ–∑ `TelegramAccountChat`. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏—á–∏–Ω–æ–π —Ç–æ–≥–æ, —á—Ç–æ —á–∞—Ç—ã –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è.

#### 2.2. –ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á (`schedule_daily_autopublish`)

**–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ**: –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 05:00 UTC (08:00 –ú–°–ö)

**–ü—Ä–æ—Ü–µ—Å—Å**:
1. –ù–∞—Ö–æ–¥—è—Ç—Å—è –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã —Å –≤–∫–ª—é—á–µ–Ω–Ω–æ–π –∞–≤—Ç–æ–ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π
2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ —Å–æ–∑–¥–∞—é—Ç—Å—è –∑–∞–¥–∞—á–∏ –≤ `AccountPublicationQueue`
3. –í—Ä–µ–º—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ —Ä–µ–∂–∏–º—É –∞–∫–∫–∞—É–Ω—Ç–∞:
   - `safe` ‚Äî –∏–Ω—Ç–µ—Ä–≤–∞–ª 5-10 –º–∏–Ω—É—Ç
   - `normal` ‚Äî –∏–Ω—Ç–µ—Ä–≤–∞–ª 3-7 –º–∏–Ω—É—Ç
   - `aggressive` ‚Äî –∏–Ω—Ç–µ—Ä–≤–∞–ª 1-3 –º–∏–Ω—É—Ç—ã
   - `smart` ‚Äî –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª
   - `fix` ‚Äî —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –∏–∑ `fix_interval_minutes`

**–ö–æ–¥** (—Å—Ç—Ä–æ–∫–∏ 528-622 –≤ `workers/tasks.py`):
```python
# –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –∑–∞–¥–∞—á–∏ –ø–æ –∞–∫–∫–∞—É–Ω—Ç–∞–º
account_tasks = {}  # {account_id: [(object_id, chat_id, user_id), ...]}

for cfg in app_configs:
    if not cfg.accounts_enabled:
        continue
    
    accounts_cfg = cfg.accounts_config_json or {}
    accounts_list = accounts_cfg.get('accounts', [])
    
    for acc_entry in accounts_list:
        account_id = acc_entry.get('account_id')
        chat_ids = acc_entry.get('chat_ids', [])
        
        if account_id not in account_tasks:
            account_tasks[account_id] = []
        
        for chat_id in chat_ids:
            account_tasks[account_id].append((cfg.object_id, chat_id, cfg.user_id))

# –°–æ–∑–¥–∞–µ–º –∑–∞–¥–∞—á–∏ —Å —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º
for account_id, tasks_list in account_tasks.items():
    account = TelegramAccount.query.get(account_id)
    scheduled_times = calculate_schedule(...)  # –ü–æ —Ä–µ–∂–∏–º—É –∞–∫–∫–∞—É–Ω—Ç–∞
    
    for i, (object_id, chat_id, user_id) in enumerate(tasks_list):
        scheduled_time_utc = msk_to_utc(scheduled_times[i])
        queue = AccountPublicationQueue(...)
        app_db.session.add(queue)
```

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—á–µ—Ä–µ–¥–µ–π (`process_account_autopublish`)

**–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ**: –ö–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É

**–ü—Ä–æ—Ü–µ—Å—Å**:
1. –ü–æ–ª—É—á–∞—é—Ç—Å—è –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã (`is_active=True`)
2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞:
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –¥–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç –ø—É–±–ª–∏–∫–∞—Ü–∏–π
   - –ü–æ–ª—É—á–∞—é—Ç—Å—è –≥–æ—Ç–æ–≤—ã–µ –∫ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –∑–∞–¥–∞—á–∏ (`status='pending'`, `scheduled_time <= now`)
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –¥–æ 10 –∑–∞–¥–∞—á –∑–∞ —Ä–∞–∑
3. –î–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏:
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, —á—Ç–æ –∞–≤—Ç–æ–ø—É–±–ª–∏–∫–∞—Ü–∏—è –≤—Å–µ –µ—â–µ –≤–∫–ª—é—á–µ–Ω–∞
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, —á—Ç–æ –∞–∫–∫–∞—É–Ω—Ç –∏ —á–∞—Ç –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ rate limit
   - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
   - –û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ Telethon
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ –∏—Å—Ç–æ—Ä–∏–∏

**–ö–æ–¥** (—Å—Ç—Ä–æ–∫–∏ 996-1416 –≤ `workers/tasks.py`):
```python
@celery_app.task(name='workers.tasks.process_account_autopublish')
def process_account_autopublish():
    with app.app_context():
        accounts = app_db.session.query(AppTelegramAccount).filter_by(is_active=True).all()
        
        for account in accounts:
            # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞
            today_publications = count_publications_today(account.account_id)
            if today_publications >= account.daily_limit:
                continue
            
            # –ü–æ–ª—É—á–µ–Ω–∏–µ –≥–æ—Ç–æ–≤—ã—Ö –∑–∞–¥–∞—á
            queues = app_db.session.query(AccountPublicationQueue).filter(
                AccountPublicationQueue.account_id == account.account_id,
                AccountPublicationQueue.status == 'pending',
                AccountPublicationQueue.scheduled_time <= now
            ).limit(10).all()
            
            for queue in queues:
                # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
                autopublish_cfg = get_autopublish_config(queue.object_id)
                if not autopublish_cfg or not autopublish_cfg.enabled:
                    queue.status = 'failed'
                    continue
                
                # –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –∞–∫–∫–∞—É–Ω—Ç –∏ —á–∞—Ç –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
                if not is_account_chat_in_config(autopublish_cfg, queue.account_id, queue.chat_id):
                    queue.status = 'failed'
                    continue
                
                # –ü—É–±–ª–∏–∫–∞—Ü–∏—è
                success, error_msg, message_id = publish_via_telethon(...)
                if success:
                    queue.status = 'completed'
                    create_publication_history(...)
                else:
                    queue.status = 'failed'
```

---

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –ü—Ä–∏–≤—è–∑–∫–∞ —á–∞—Ç–æ–≤ –∫ –∞–∫–∫–∞—É–Ω—Ç–∞–º

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∞–≤—Ç–æ–ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ legacy –ø–æ–ª–µ `chat.owner_account_id`, –Ω–æ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å–≤—è–∑—å —á–µ—Ä–µ–∑ `TelegramAccountChat`.

**–¢–µ–∫—É—â–∏–π –∫–æ–¥** (—Å—Ç—Ä–æ–∫–∞ 482 –≤ `app/routes/user_routes.py`):
```python
if chat and chat.owner_type == 'user' and chat.owner_account_id == account_id:
```

**–†–µ—à–µ–Ω–∏–µ**: –ù—É–∂–Ω–æ —Ç–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Å–≤—è–∑—å —á–µ—Ä–µ–∑ `TelegramAccountChat`:
```python
from app.models.telegram_account_chat import TelegramAccountChat

# –ü—Ä–æ–≤–µ—Ä–∫–∞ legacy —Å–≤—è–∑–∏
legacy_check = chat.owner_account_id == account_id

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤–æ–π —Å–≤—è–∑–∏ —á–µ—Ä–µ–∑ TelegramAccountChat
new_check = app_db.session.query(TelegramAccountChat).filter_by(
    account_id=account_id,
    chat_id=chat_id
).first() is not None

if chat and chat.owner_type == 'user' and (legacy_check or new_check):
```

### 2. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–∞—Ç–æ–≤ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ ‚úÖ –†–ï–®–ï–ù–û

**–ü—Ä–æ–±–ª–µ–º–∞**: –ß–∞—Ç—ã –∑–∞–±—ã–≤–∞–ª–∏—Å—å –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ —Ä–µ–∂–∏–º–∞ –∞–≤—Ç–æ–ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Å "–ë–æ—Ç + –ê–∫–∫–∞—É–Ω—Ç" –Ω–∞ "–ë–æ—Ç".

**–†–µ—à–µ–Ω–∏–µ**: 
1. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–≤—è–∑–∫–∏ —á–∞—Ç–æ–≤ (—Å–º. –≤—ã—à–µ) - —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –æ–±–µ —Å–≤—è–∑–∏ (legacy + –Ω–æ–≤–∞—è)
2. ‚úÖ –ß–∞—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–≤—è–∑—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —á–µ—Ä–µ–∑ endpoint `/accounts/<account_id>/chats`
3. ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å —á–∞—Ç—ã —á–µ—Ä–µ–∑ UI –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ "–ß–∞—Ç—ã" –∏–ª–∏ "–ê–≤—Ç–æ–ø—É–±–ª–∏–∫–∞—Ü–∏—è"
4. ‚úÖ **–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï**: –ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ —Ä–µ–∂–∏–º–∞ –Ω–∞ "–ë–æ—Ç" —Ç–µ–ø–µ—Ä—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è **–í–°–Ø** –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é (—Ñ–æ—Ä–º–∞—Ç –ø—É–±–ª–∏–∫–∞—Ü–∏–∏, –∞–∫–∫–∞—É–Ω—Ç—ã –∏ —á–∞—Ç—ã). –ß–∞—Ç—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ "–ë–æ—Ç" (–Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –æ—á–µ—Ä–µ–¥–∏), –Ω–æ –æ—Å—Ç–∞—é—Ç—Å—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏. –ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ "–ë–æ—Ç + –ê–∫–∫–∞—É–Ω—Ç" –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ - –Ω–∏—á–µ–≥–æ –Ω–µ –Ω—É–∂–Ω–æ –≤—ã–±–∏—Ä–∞—Ç—å –∑–∞–Ω–æ–≤–æ

### 3. SoftTimeLimitExceeded

**–ü—Ä–æ–±–ª–µ–º–∞**: –ó–∞–¥–∞—á–∏ –º–æ–≥—É—Ç –ø—Ä–µ—Ä—ã–≤–∞—Ç—å—Å—è –ø–æ —Ç–∞–π–º–∞—É—Ç—É (soft_time_limit=240 —Å–µ–∫—É–Ω–¥).

**–†–µ—à–µ–Ω–∏–µ**: 
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `SoftTimeLimitExceeded` –≤—ã–Ω–µ—Å–µ–Ω –Ω–∞—Ä—É–∂—É `app.app_context()` –¥–ª—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ –Ω–∞ –ª—é–±–æ–º —ç—Ç–∞–ø–µ
- –ó–∞—Å—Ç—Ä—è–≤—à–∏–µ –∑–∞–¥–∞—á–∏ (processing –±–æ–ª–µ–µ 5 –º–∏–Ω—É—Ç) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –≤ `pending`

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –°–∫—Ä–∏–ø—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

–ó–∞–ø—É—Å–∫ –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ:
```bash
docker exec -it realty_web python scripts/diagnose_account_autopublish.py
```

–°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
- –ê–∫—Ç–∏–≤–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã –∏ –∏—Ö –ª–∏–º–∏—Ç—ã
- –°–æ—Å—Ç–æ—è–Ω–∏–µ –æ—á–µ—Ä–µ–¥–µ–π –ø—É–±–ª–∏–∫–∞—Ü–∏–π
- –ì–æ—Ç–æ–≤—ã–µ –∫ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –∑–∞–¥–∞—á–∏
- –ó–∞—Å—Ç—Ä—è–≤—à–∏–µ –∑–∞–¥–∞—á–∏
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∞–≤—Ç–æ–ø—É–±–ª–∏–∫–∞—Ü–∏–∏
- –ò—Å—Ç–æ—Ä–∏—é –ø—É–±–ª–∏–∫–∞—Ü–∏–π –∑–∞ —Å–µ–≥–æ–¥–Ω—è

### –õ–æ–≥–∏

**Celery worker**:
```bash
docker logs realty_celery_worker --tail 100
```

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**:
```bash
docker logs realty_web --tail 100
```

**–õ–æ–≥–∏ –∞–≤—Ç–æ–ø—É–±–ª–∏–∫–∞—Ü–∏–∏**:
- `logs/test_celery.log` ‚Äî –ª–æ–≥–∏ Celery –∑–∞–¥–∞—á
- `logs/test_app.log` ‚Äî –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ë–î

```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—á–µ—Ä–µ–¥–µ–π
SELECT * FROM account_publication_queues 
WHERE status = 'pending' 
ORDER BY scheduled_time ASC;

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–≤—è–∑–æ–∫ —á–∞—Ç–æ–≤ –∫ –∞–∫–∫–∞—É–Ω—Ç–∞–º
SELECT * FROM telegram_account_chats 
WHERE account_id = 1;

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
SELECT object_id, accounts_config_json 
FROM autopublish_configs 
WHERE enabled = true;
```

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ü—Ä–∏–≤—è–∑–∫–∞ —á–∞—Ç–æ–≤**: 
   - –í—Å–µ–≥–¥–∞ –∑–∞–≥—Ä—É–∂–∞–π—Ç–µ —á–∞—Ç—ã –¥–ª—è –∞–∫–∫–∞—É–Ω—Ç–∞ **–¥–æ** —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∞–≤—Ç–æ–ø—É–±–ª–∏–∫–∞—Ü–∏–∏
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É "–ß–∞—Ç—ã" (`/user/dashboard/chats`) –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —á–∞—Ç–æ–≤
   - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É "–ó–∞–≥—Ä—É–∑–∏—Ç—å —á–∞—Ç—ã" –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ "–ê–≤—Ç–æ–ø—É–±–ª–∏–∫–∞—Ü–∏—è"
   - –ü—Ä–∏–≤—è–∑–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —á–∞—Ç–æ–≤ —á–µ—Ä–µ–∑ endpoint `/accounts/<account_id>/chats`

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤**: –°–ª–µ–¥–∏—Ç–µ –∑–∞ –¥–Ω–µ–≤–Ω—ã–º–∏ –ª–∏–º–∏—Ç–∞–º–∏ –∞–∫–∫–∞—É–Ω—Ç–æ–≤

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∑–∞—Å—Ç—Ä—è–≤—à–∏–µ –∑–∞–¥–∞—á–∏ (status='processing' –±–æ–ª–µ–µ 5 –º–∏–Ω—É—Ç)

4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –í–∫–ª—é—á–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `process_account_autopublish` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–±–ª–µ–º

5. **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç `scripts/diagnose_account_autopublish.py` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã:
   ```bash
   docker exec -it realty_web python scripts/diagnose_account_autopublish.py
   ```

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `app/models/telegram_account.py` ‚Äî –º–æ–¥–µ–ª—å –∞–∫–∫–∞—É–Ω—Ç–∞
- `app/models/chat.py` ‚Äî –º–æ–¥–µ–ª—å —á–∞—Ç–∞
- `app/models/telegram_account_chat.py` ‚Äî —Å–≤—è–∑—å –∞–∫–∫–∞—É–Ω—Ç ‚Üî —á–∞—Ç
- `app/models/autopublish_config.py` ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞–≤—Ç–æ–ø—É–±–ª–∏–∫–∞—Ü–∏–∏
- `app/models/account_publication_queue.py` ‚Äî –æ—á–µ—Ä–µ–¥—å –ø—É–±–ª–∏–∫–∞—Ü–∏–π
- `app/routes/user_routes.py` ‚Äî API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–≤—Ç–æ–ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π
- `workers/tasks.py` ‚Äî Celery –∑–∞–¥–∞—á–∏ (schedule_daily_autopublish, process_account_autopublish)
- `scripts/diagnose_account_autopublish.py` ‚Äî —Å–∫—Ä–∏–ø—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

